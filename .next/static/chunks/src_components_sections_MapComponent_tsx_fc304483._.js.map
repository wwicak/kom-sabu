{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/dimastriwicaksono/Documents/kominfo-sabu/src/components/sections/MapComponent.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useRef } from 'react'\nimport { MapContainer, TileLayer, GeoJSON, useMap } from 'react-leaflet'\nimport L from 'leaflet'\nimport 'leaflet/dist/leaflet.css'\n\n// Fix for default markers in react-leaflet\nif (typeof window !== 'undefined') {\n  delete (L.Icon.Default.prototype as any)._getIconUrl\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\n    iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\n    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\n  })\n}\n\ninterface KecamatanData {\n  _id: string\n  name: string\n  slug: string\n  description?: string\n  area: number\n  population: number\n  villages: number\n  coordinates: {\n    center: { lat: number; lng: number }\n    bounds?: {\n      north: number\n      south: number\n      east: number\n      west: number\n    }\n  }\n  polygon: {\n    type: 'Polygon' | 'MultiPolygon'\n    coordinates: number[][][]\n  }\n  potency: any\n  demographics: any\n  images?: Array<{\n    url: string\n    caption: string\n    category: string\n  }>\n  headOffice?: {\n    address: string\n    phone: string\n    email: string\n    head: string\n  }\n}\n\ninterface MapComponentProps {\n  kecamatanData: KecamatanData[]\n  selectedKecamatan?: string | null\n  onKecamatanSelect?: (kecamatan: KecamatanData | null) => void\n}\n\n\n\n// Component to handle map events\nfunction MapEventHandler({ onKecamatanSelect }: { onKecamatanSelect?: (kecamatan: KecamatanData | null) => void }) {\n  const map = useMap()\n\n  useEffect(() => {\n    const handleMapClick = () => {\n      onKecamatanSelect?.(null)\n    }\n\n    map.on('click', handleMapClick)\n\n    return () => {\n      map.off('click', handleMapClick)\n    }\n  }, [map, onKecamatanSelect])\n\n  return null\n}\n\nexport function MapComponent({ kecamatanData, selectedKecamatan, onKecamatanSelect }: MapComponentProps) {\n  const mapRef = useRef<L.Map | null>(null)\n\n  // Sabu Raijua coordinates (approximate center)\n  const center: [number, number] = [-10.5, 121.8]\n  const zoom = 10\n\n  const getKecamatanColor = (kecamatanName: string) => {\n    const colors = [\n      '#3B82F6', // blue\n      '#10B981', // emerald\n      '#F59E0B', // amber\n      '#EF4444', // red\n      '#8B5CF6', // violet\n      '#06B6D4', // cyan\n    ]\n    const index = kecamatanData.findIndex(k => k.name === kecamatanName)\n    return colors[index % colors.length]\n  }\n\n  const onEachFeature = (feature: any, layer: L.Layer) => {\n    const kecamatan = feature.properties as KecamatanData\n\n    layer.on({\n      mouseover: (e) => {\n        const layer = e.target\n        layer.setStyle({\n          weight: 3,\n          color: '#ffffff',\n          fillOpacity: 0.8\n        })\n      },\n      mouseout: (e) => {\n        const layer = e.target\n        layer.setStyle({\n          weight: 2,\n          color: getKecamatanColor(kecamatan.name),\n          fillOpacity: 0.6\n        })\n      },\n      click: (e) => {\n        e.originalEvent.stopPropagation()\n        onKecamatanSelect?.(kecamatan)\n\n        // Zoom to feature\n        if (mapRef.current) {\n          mapRef.current.fitBounds(layer.getBounds(), { padding: [20, 20] })\n        }\n      }\n    })\n  }\n\n  const geoJsonStyle = (feature: any) => {\n    const kecamatan = feature.properties as KecamatanData\n    const isSelected = selectedKecamatan === kecamatan.slug\n\n    return {\n      fillColor: getKecamatanColor(kecamatan.name),\n      weight: isSelected ? 3 : 2,\n      opacity: 1,\n      color: isSelected ? '#ffffff' : getKecamatanColor(kecamatan.name),\n      fillOpacity: isSelected ? 0.8 : 0.6\n    }\n  }\n\n  // Convert kecamatan data to GeoJSON format\n  const geoJsonData = {\n    type: 'FeatureCollection' as const,\n    features: kecamatanData.map(kecamatan => ({\n      type: 'Feature' as const,\n      properties: kecamatan,\n      geometry: {\n        type: kecamatan.polygon.type,\n        coordinates: kecamatan.polygon.coordinates\n      }\n    }))\n  }\n\n  return (\n    <div className=\"w-full h-96 rounded-lg overflow-hidden shadow-lg\">\n      <MapContainer\n        center={center}\n        zoom={zoom}\n        style={{ height: '100%', width: '100%' }}\n        ref={mapRef}\n      >\n        <TileLayer\n          attribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Tiles courtesy of <a href=\"https://openfreemap.org\">OpenFreeMap</a>'\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        />\n\n        <GeoJSON\n          data={geoJsonData}\n          style={geoJsonStyle}\n          onEachFeature={onEachFeature}\n        />\n\n        <MapEventHandler onKecamatanSelect={onKecamatanSelect} />\n      </MapContainer>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}